{% comment %}
  KITH-STYLE HERO SLIDER
  Full-width, manual navigation with chevron, dot animation
{% endcomment %}

<section id="KithHeroSlider" class="kith-hero">
  <div class="kith-hero__wrapper">
    {% for block in section.blocks %}
      <div
        class="kith-slide{% if forloop.first %} is-active{% endif %}"
        style="background-image: url({{ block.settings.image | image_url: width: 2400 }});"
        data-index="{{ forloop.index0 }}"
      >
        {% if block.settings.heading != blank or block.settings.subheading != blank %}
          <div class="kith-slide__content">
            {% if block.settings.heading %}
              <h2>{{ block.settings.heading }}</h2>
            {% endif %}
            {% if block.settings.subheading %}
              <p>{{ block.settings.subheading }}</p>
            {% endif %}
          </div>
        {% endif %}
      </div>
    {% endfor %}

    <!-- Chevron Prev/Next -->
    <button class="kith-arrow kith-prev" aria-label="Previous slide">&#10094;</button>
    <button class="kith-arrow kith-next" aria-label="Next slide">&#10095;</button>
  </div>

  <!-- Dots -->
  <div class="kith-dots">
    {% for block in section.blocks %}
      <div class="kith-dot{% if forloop.first %} active{% endif %}" data-dot="{{ forloop.index0 }}">
        <span class="progress"></span>
      </div>
    {% endfor %}
  </div>
</section>

{% stylesheet %}
  .kith-hero {
    position: relative;
    width: 100vw;
    max-width: 100%;
    overflow: hidden;
  }

  .kith-hero__wrapper {
    position: relative;
    width: 100%;
    height: 100vh;
  }

  .kith-slide {
    position: absolute;
    inset: 0;
    background-size: cover;
    background-position: center;
    opacity: 0;
    transition: opacity 0.8s ease;
  }

  .kith-slide.is-active {
    opacity: 1;
  }

  .kith-slide__content {
    position: absolute;
    bottom: 12%;
    left: 50%;
    transform: translateX(-50%);
    text-align: center;
    color: white;
    z-index: 5;
  }

  /* Dots */
  .kith-dots {
    position: absolute;
    bottom: 32px;
    left: 50%;
    transform: translateX(-50%);
    display: flex;
    gap: 10px;
    z-index: 20;
  }

  .kith-dot {
    width: 10px;
    height: 10px;
    background: rgba(255, 255, 255, 0.4);
    border-radius: 50%;
    position: relative;
    overflow: hidden;
    cursor: pointer;
    transition: all 0.3s ease;
  }

  .kith-dot.active {
    width: 28px;
    border-radius: 5px;
  }

  .kith-dot .progress {
    position: absolute;
    top: 0;
    left: 0;
    width: 0%;
    height: 100%;
    background: white;
    transition: width 0s linear;
  }

  /* Chevron */
  .kith-arrow {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    font-size: 28px;
    color: #fff;
    background: transparent;
    border: none;
    padding: 0;
    cursor: pointer;
    z-index: 10;
  }

  .kith-prev {
    left: 20px;
  }
  .kith-next {
    right: 20px;
  }

  .kith-arrow:hover {
    opacity: 0.9;
  }
{% endstylesheet %}

<script
  src="{{ 'kith-hero-slider.js' | asset_url }}"
  type="module"
  fetchpriority="low"
></script>

{% schema %}
{
  "name": "KITH Hero Slider",
  "settings": [],
  "blocks": [
    {
      "type": "slide",
      "name": "Slide",
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "Background image"
        },
        {
          "type": "text",
          "id": "heading",
          "label": "Heading"
        },
        {
          "type": "textarea",
          "id": "subheading",
          "label": "Subheading"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "KITH Hero Slider"
    }
  ]
}
{% endschema %}
